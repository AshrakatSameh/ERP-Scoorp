<div class="wrapper">
  <!-- Sidebar component on the left -->

  <div class="main-panel">
    <!-- Main content section -->
    <div class="container">
      <div class="page-inner">
        <div class="page-header d-flex justify-content-between align-items-center flex-row-reverse">
          <h3 class="fw-bold mb-3 text-end">المشاريع</h3>
          <ul class="breadcrumbs mb-3">
            <li class="nav-item dropdown">
              <button class="btn d-flex justify-content-start align-items-center" data-bs-toggle="dropdown"
                aria-expanded="false">
                Admin
                <!-- Placeholder for the dropdown arrow -->
                <i class="fa-solid fa-caret-down"></i>
              </button>
            </li>
            <li class="nav-home">
              <a href="#">
                <i class="fa-solid fa-search"></i>
              </a>
            </li>
            <li class="separator">
              <!-- <i class="icon-arrow-right"></i> -->
            </li>
            <li class="nav-item">
              <a href="#">
                <i class="fa-solid fa-bell"></i>
              </a>
            </li>
            <li class="separator">
              <!-- <i class="icon-arrow-right"></i> -->
            </li>
            <li class="nav-item">
              <i class="fa-solid fa-gear"></i>
            </li>
          </ul>
        </div>

        <div class="row">
          <div class="col-md-12">
            <div class="card">
              <div class="card-header d-flex justify-content-between align-items-center flex-row-reverse">
                <h4 class="card-title text-end">المشاريع</h4>
                <div class="button-group d-flex justify-content-start">
                  <button type="button" class="btn my-button" data-bs-toggle="modal" data-bs-target="#myModal">
                    اضف مشروع جديد
                    <i class="fa-solid fa-plus"></i>
                  </button>
                  <button type="button" class="btn ms-3 my-button2">
                    <i class="fa-solid fa-print"></i>
                    طباعه
                  </button>
                  <div class="dropdown">
                    <button type="button" class="btn ms-3 my-button2" (click)="toggleDropdown2()">
                      <i class="fa-solid fa-gear"></i> الاجراءات
                    </button>

                    <div class="dropdown-menu" *ngIf="isDropdownOpen2" style="cursor:default;">
                      <a class="dropdown-item" (click)="openModalForSelected()">تعديل</a>
                      <a class="dropdown-item" (click)="openConfirmationModal()">حذف</a>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="d-flex flex-row align-items-center mt-3 d-flex justify-content-between align-items-center flex-row-reverse">
                <div class="mb-2 me-2" style="width: 100px">
                  <select class="form-select" aria-label="Default select example">
                    <option selected disabled>الاحدث</option>
                    <option value="1">الاقدم</option>
                    <option value="2">الاحدث</option>
                    <option value="3">ترتيب ابجدي</option>
                  </select>
                </div>

                <div class="d-flex align-items-center flex-row-reverse">
                  <!-- Button with icon -->
                  <button class="btn my-custom-icone me-2">
                    <span class="btn-label">
                      <i class="fa-solid fa-sliders"></i>
                    </span>
                  </button>

                  <!-- Search form -->
                  <div class="d-flex position-relative">
                    <input class="form-control text-end search-input" type="search" placeholder="بحث في الكل"
                      aria-label="Search" [(ngModel)]="searchQuery" (input)="onSearchInputChange($event)" />
                    <i class="fs-4 bi-search position-absolute search-icon"></i>
                  </div>
                </div>

                <div class="icon-group d-flex align-items-center">
                  <button class="btn my-custom-icone" [ngClass]="{ 'clicked-button': isFirstButtonClicked }"
                    (click)="toggleFirstButtonClick()">
                    <span class="btn-label">
                      <i class="fa-solid fa-table-cells-large"></i>
                    </span>
                  </button>

                  <button class="btn my-custom-icone" [ngClass]="{ 'clicked-button': isSecondButtonClicked }"
                    (click)="toggleSecondButtonClick()">
                    <span class="btn-label">
                      <i class="fa-solid fa-list-ul"></i>
                    </span>
                  </button>
                </div>
              </div>

              <div class="card-body" *ngIf="istableview">
                <div class="table-responsive">
                  <table id="basic-datatables" class="display table table-striped table-hover">
                    <thead>
                      <tr class="firstcol">
                        <th class="firstcolleft position-relative">

                          <div>
                            <!-- Icon to trigger dropdown -->
                            <i class="fa-solid fa-right-left" style="cursor: pointer" (click)="toggleDropdown()"></i>

                            <!-- Dropdown menu for selecting columns -->
                            <ul *ngIf="showDropdown" class="dropdown-menu" style="background: #f1f1f4; border: 1px solid #ccc; padding: 10px; position: absolute; z-index: 1000;
                              border-radius: 15px;">
                              <li *ngFor="let column of columns">
                                <a class="dropdown-item">
                                  <div class="d-flex justify-content-end align-items-center">
                                    {{ column.displayName }}
                                    <input class="mx-2" type="checkbox" [(ngModel)]="column.visible" />
                                  </div>

                                </a>

                              </li>
                            </ul>
                          </div>


                        </th>
                        <th> </th>
                        <th *ngIf="isColumnVisible('endDate')">تاريخ الإنتهاء</th>
                        <th *ngIf="isColumnVisible('startDate')">تاريخ البدء</th>
                        <th *ngIf="isColumnVisible('clientName')">اسم العميل</th>
                        <th *ngIf="isColumnVisible('code')">كود المشروع</th>
                        <th *ngIf="isColumnVisible('localName')">اسم القسم باللغه المحليه</th>
                        <th *ngIf="isColumnVisible('name')">اسم القسم</th>
                        <!-- <th>كود القسم</th>
                        <th>المنشأ</th>
                        <th>تاريخ الانشاء</th>
                        <th>اسم القسم باللغه المحليه</th>
                        <th>اسم القسم</th> -->
                        <th class="fixed-right">المسلسل</th>
                        <th class="firstcolright fixed-right">
                          <span *ngIf="true" [style.visibility]="selectedCount > 0 ? 'visible' : 'hidden'"
                            style="display: inline-block; width: 1.5rem; text-align: center;">
                            {{ selectedCount }}
                          </span>
                          <input type="checkbox" [(ngModel)]="selectAll" (change)="toggleAllCheckboxes()"
                            class="large-checkbox mx-1" />
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of filteredProjects, let i = index">
                        <td> </td>
                        <td> </td>

                        <td *ngIf="isColumnVisible('endDate')">{{ item.endDate |date: 'dd/MM/yy' }}</td>
                        <td *ngIf="isColumnVisible('startDate')">{{ item.startDate | date: 'dd/MM/yy' }}</td>
                        <td *ngIf="isColumnVisible('clientName')">{{ item.clientName }}</td>
                        <td *ngIf="isColumnVisible('code')">{{ item.code }}</td>
                        <td *ngIf="isColumnVisible('localName')">{{ item.localName }}</td>
                        <td *ngIf="isColumnVisible('name')">{{ item.name }}</td>
                        <!-- <td>{{item.name}}</td>
                        <td>{{item.startDate}}</td>
                        <td>{{item.localName}}</td>
                        <td>{{item.name}}</td> -->
                        <td class="fixed-right">{{ i+1 }}</td>
                        <td class=" fixed-right">
                          <input type="checkbox" [(ngModel)]="item.checked" (change)="onCheckboxChange(item)"
                            class="large-checkbox mx-1" />
                        </td>

                      </tr>

                  </table>

                  <!-- paging -->
                  <nav *ngIf="!searchQuery" aria-label="Page navigation">
                    <ul class="pagination justify-content-end">
                      <!-- Previous Button -->
                      <li class="page-item" [class.disabled]="pageNumber === 1">
                        <a class="page-link" (click)="changePage(pageNumber - 1)" tabindex="-1"
                          [attr.aria-disabled]="pageNumber === 1 ? true : null">&laquo;</a>
                      </li>

                      <!-- Dynamically Render Page Numbers -->
                      <ng-container *ngFor="let page of [].constructor(totalPages); let i = index">
                        <li class="page-item" [class.active]="pageNumber === (i + 1)">
                          <a class="page-link" (click)="changePage(i + 1)">{{ i + 1 }}</a>
                        </li>
                      </ng-container>

                      <!-- Next Button -->
                      <li class="page-item" [class.disabled]="pageNumber === totalPages">
                        <a class="page-link" (click)="changePage(pageNumber + 1)"
                          [attr.aria-disabled]="pageNumber === totalPages ? true : null">&raquo;</a>
                      </li>
                    </ul>
                  </nav>
                </div>
              </div>

              <div class="card-body" *ngIf="iscardsview">
                <div class="container-fluid mt-4">
                  <div class="row">
                    <div class="col-md-3">
                      <div class="card h-100">
                        <div class="card-header">
                          <h6 class="small-header">Card 1</h6>
                        </div>
                        <div class="card-body">
                          <p class="card-text">Some text inside card 1.</p>
                        </div>
                        <div class="card-footer text-end">
                          <button class="btn btn-primary">عرض سعر</button>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-3">
                      <div class="card h-100">
                        <div class="card-header">
                          <h6 class="small-header">Card 2</h6>
                        </div>
                        <div class="card-body">
                          <p class="card-text">Some text inside card 2.</p>
                        </div>
                        <div class="card-footer text-end">
                          <button class="btn btn-primary">عرض سعر</button>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-3">
                      <div class="card h-100">
                        <div class="card-header">
                          <h6 class="small-header">Card 3</h6>
                        </div>
                        <div class="card-body">
                          <p class="card-text">Some text inside card 3.</p>
                        </div>
                        <div class="card-footer text-end">
                          <button class="btn btn-primary">عرض سعر</button>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-3">
                      <div class="card h-100">
                        <div class="card-header">
                          <h6 class="small-header">Card 4</h6>
                        </div>
                        <div class="card-body">
                          <p class="card-text">Some text inside card 4.</p>
                        </div>
                        <div class="card-footer text-end">
                          <button class="btn btn-primary">عرض سعر</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade overlay" id="myModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true" role="dialog"
  #myModal>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-end flex-row-reverse" id="staticBackdropLabel">
          انشاء مشروع جديد
        </h5>
      </div>
      <div class="modal-body">
        <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">
          <div class="container">
            <!-- Row with two fields -->
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field1 text-end"> اسم المشروع</label>
                  <input type="text" id="name" name="name" formControlName="name" class="form-control custom-input"
                    placeholder="اسم المشروع" />
                  <div *ngIf="projectForm.get('name')?.invalid && projectForm.get('name')?.touched" class="text-danger">
                    اسم المشروع مطلوب.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field2 text-end">اسم المشروع باللغه المحليه </label>
                  <input type="text" id="localName" name="localName" formControlName="localName"
                    class="form-control custom-input" placeholder="Project " />
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label class="form-label">العميل</label>
                  <div class="input-group">
                    <select class="form-select form-control custom-input" formControlName="clientId">
                      <option value="" disabled selected>قم باختيار العميل</option>
                      <option *ngFor="let item of clients" [value]="item.id">{{ item.name }}</option>

                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for=" text-end">موكل إلي</label>
                  <div class="input-group">
                    <select class="form-select form-control custom-input" formControlName="assignedToId">
                      <option value="" disabled selected>قم باختيار المستخدم</option>
                      <option *ngFor="let item of users" [value]="item.id">{{ item.userName }}</option>

                    </select>
                  </div>
                  <div *ngIf="projectForm.get('assignedToId')?.invalid && projectForm.get('assignedToId')?.touched"
                    class="text-danger">
                    اسم الموكل اليه مطلوب.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field2 text-end">فريق</label>
                  <div class="input-group">
                    <select class="form-select form-control custom-input" formControlName="teamId">
                      <option disabled selected>قم باختيار الفريق</option>
                      <option *ngFor="let item of teamss" [value]="item.id">{{ item.name }}</option>

                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label for="field1 text-end">المستخدمين</label>
                  <div class="input-group">
                    <!-- <select class="form-select form-control custom-input" formControlName="userIds">
                      <option value="" disabled selected>قم باختيار المستخدم</option>
                      <option *ngFor="let item of users" [value]="item.id">{{ item.userName }}</option>

                    </select> -->
                    <ng-multiselect-dropdown style="width: 100%;" [settings]="dropdownSettings" [data]="users"
                      formArrayName="userIds" (onSelect)="onItemSelect($event)" (onDeSelect)="onItemDeselect($event)"
                      (onSelectAll)="onSelectAll($event)" (onDeSelectAll)="onDeselectAll()">
                    </ng-multiselect-dropdown>
                  </div>
                  <div *ngIf="projectForm.get('userIds')?.invalid && projectForm.get('userIds')?.touched"
                    class="text-danger">
                    المستخدم مطلوب.
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field1 text-end">تاريخ البدء</label>
                  <input type="date" id="startDate" name="startDate" formControlName="startDate"
                    class="form-control custom-input" placeholder="قم باختيار التاريخ" />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field2 text-end"> تاريخ الانتهاء </label>
                  <input type="date" id="endDate" name="endDate" formControlName="endDate"
                    class="form-control custom-input" placeholder="قم باختيار التاريخ" />
                </div>
              </div>
            </div>

            <div class="scroll-buttons-container">
              <button *ngFor="let btn of buttons; let i = index" [id]="'button-' + i" class="scroll-button"
                type="button" (click)="showContent(i)">
                {{ btn }}
              </button>
            </div>

            <!-- Show Details -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 0">
                <div class="container mt-5">
                  <h5 class="mb-3">المرفقات</h5>
                  <button class="btn btn-link text-muted p-1">
                    <i class="fa fa-microphone"></i>
                  </button>

                  <button class="btn btn-link text-muted p-1">
                    <i class="fa fa-paperclip"></i>
                  </button>

                  <div class="custom-file-upload">
                    <i class="fas fa-cloud-upload-alt fa-3x mb-3"></i>
                    <p>حدد ملفًا أو قم بالسحب والإسقاط هنا</p>
                    <small class="text-muted">JPG, PNG or PDF; file size no more than 10MB</small>
                  </div>
                </div>

                <div class="row align-items-center">
                  <div class="col-md-9">
                    <label for="location" class="form-label">الموقع</label>
                    <div class="input-group">
                      <input type="text" id="field3" class="form-control custom-input"
                        placeholder="قم باختيار الموقع" />
                    </div>
                  </div>
                  <div class="col-md-3 d-flex justify-content-start mt-3 mt-md-0">
                    <button class="btn btn-primary locationButton" type="button" (click)="toggleMap()">
                      <i class="fas fa-map-marker-alt"></i> أضف موقع
                    </button>
                  </div>
                </div>

                <!-- Map Viewing -->



                <div *ngIf="isMapView">
                  <div class="row align-items-center">
                    <div class="col-md-9">
                      <label for="location" class="form-label">عرض الخريطه</label>

                    </div>
                    <div class="col-md-3 d-flex justify-content-start mt-3 mt-md-0">
                      <button type="button" class="btn btn-outline-primary m-2" (click)="closeMap()">الغاء</button>
                      <button type="button" class="btn btn-primary m-2">حفظ</button>
                    </div>
                  </div>

                  <!-- Input Fields for Site Information -->
                  <div class="row mb-4">
                    <div class="col-md-3">
                      <label for="siteName" class="form-label">اسم الموقع</label>
                      <input type="text" class="form-control" id="siteName" placeholder="قم بكتابة اسم الموقع">
                    </div>
                    <div class="col-md-3">
                      <label for="line1" class="form-label">خط الطول</label>
                      <input type="text" class="form-control" id="line1" placeholder="قم بكتابة خط الطول">
                    </div>
                    <div class="col-md-3">
                      <label for="line2" class="form-label">خط العرض</label>
                      <input type="text" class="form-control" id="line2" placeholder="قم بكتابة خط العرض">
                    </div>
                    <div class="col-md-3">
                      <label for="line3" class="form-label">العنوان</label>
                      <input type="text" class="form-control" id="line3" placeholder="قم بكتابة خط العرض">
                    </div>
                  </div>

                  <!-- Map Display Section -->
                  <div class="row mb-4">
                    <div class="col-md-12 text-center">
                      <h5 class="mb-4">عرض الخريطة</h5>
                      <div class="map-container" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden;">
                        <iframe
                          src="https://maps.google.com/maps?q=2972%20Westheimer%20Rd,%20Santa%20Ana,%20Elmas%2089846&t=&z=13&ie=UTF8&iwloc=&output=embed"
                          width="100%" height="400" frameborder="0" style="border:0;" allowfullscreen=""
                          aria-hidden="false" tabindex="0">
                        </iframe>
                      </div>
                    </div>
                  </div>

                </div>

                <!-- End MApping View -->

                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field1 text-end">نوع المشروع</label>
                      <!-- <input type="text" id="projectTypeId" formControlName="projectTypeId"
                        class="form-control custom-input" placeholder="قم باختبار النوع" /> -->
                        <select class="form-select form-control custom-input" formControlName="projectTypeId">
                          <option disabled selected>قم باختيار نوع المشروع</option>
                          <option *ngFor="let item of projectTypes" [value]="item.id">{{ item.name }}</option>
    
                        </select>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field2 text-end">مركز التكلفه </label>
                      <select class="form-select form-control custom-input" formControlName="costCenterId">
                        <option disabled selected>قم باختيار مركز التكلفة</option>
                        <option *ngFor="let item of costCenters" [value]="item.id">{{ item.name }}</option>
  
                      </select>
                    </div>
                  </div>
                </div>


                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field1 text-end">اولويه المشروع</label>
                      <input type="text" id="priority" name="priority" formControlName="priority"
                        class="form-control custom-input" placeholder="قم باختبار اولويه المشروع" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field2 text-end"> حجم المشروع</label>
                      <input type="text" id="size" name="size" formControlName="size" class="form-control custom-input"
                        placeholder="قم باختيار حجم المشروع" />
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label for="field1 text-end">وصف المشروع</label>
                      <textarea class="form-control custom-input" formControlName="description" id="description"
                        rows="3"></textarea>
                    </div>
                  </div>
                </div>



                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field1 text-end">العقود</label>
                      <ng-multiselect-dropdown style="width: 100%;" [settings]="ContractsdropdownSettings"
                        [data]="contracts" (onSelect)="onContractSelect($event)"
                        (onDeSelect)="onContractDeselect($event)" (onSelectAll)="onContractSelectAll($event)"
                        (onDeSelectAll)="onContractDeselectAll()">
                      </ng-multiselect-dropdown>

                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field2 text-end">المعدات </label>
                      <ng-multiselect-dropdown style="width: 100%;" [settings]="EquipdropdownSettings" [data]="equips"
                        (onSelect)="onEquipmentSelect($event)" (onDeSelect)="onEquipmentDeselect($event)"
                        (onSelectAll)="onEquipmentSelectAll($event)" (onDeSelectAll)="onEquipmentDeselectAll()">
                      </ng-multiselect-dropdown>
                    </div>
                  </div>
                </div>

                <div class="row align-items-center mb-4">
                  <div class="col-md-9">
                    <label for="location" class="form-label">جهه الاتصال</label>
                    <div class="input-group">
                      <ng-multiselect-dropdown style="width: 100%;" [settings]="ContactdropdownSettings" [data]="contacts"
                        (onSelect)="onContactSelect($event)" (onDeSelect)="onContactDeselect($event)"
                        (onSelectAll)="onContactSelectAll($event)" (onDeSelectAll)="onContactDeselectAll()">
                      </ng-multiselect-dropdown>
                    </div>
                  </div>
                  <div class="col-md-3 d-flex justify-content-start mt-3 mt-md-0">
                    <button class="btn btn-primary locationButton" type="button" data-bs-toggle="modal"
                      data-bs-target="#AddContact">
                      <i class="fa-solid fa-address-book"></i>أضف جهه الاتصال
                    </button>
                  </div>
                </div>

                <h5>اظهار الانشطه</h5>
                <div class="row">
                  <div class="col-md-6">
                    <div class="container mt-4">
                      <div class="card chat-card">
                        <div class="card-body p-3">
                          <div class="d-flex align-items-center">
                            <h6 class="chat-name mb-0" style="padding-left:120px;">Alice Smith</h6>
                            <span class="chat-time"> 01 Oct 2024</span>
                          </div>
                          <p class="chat-message mt-2">
                            I'm good, thanks for asking! What about you?
                          </p>
                        </div>
                      </div>

                      <div class="card chat-card">
                        <div class="card-body p-3">
                          <div class="d-flex align-items-center">
                            <h6 class="chat-name mb-0" style="padding-left:120px;">Alice Smith</h6>
                            <span class="chat-time"> 01 Oct 2024</span>
                          </div>
                          <p class="chat-message mt-2">
                            I'm good, thanks for asking! What about you?
                          </p>
                        </div>
                      </div>
                    </div>

                  </div>


                </div>


              </div>
            </div>

            <!-- Show assignments  -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 1">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="card-title text-end">المهام</h5>
                  <div class="button-group d-flex justify-content-start">
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#Addmession">+
                      إضافة مهمه</button>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <table id="basic-datatables" class="display table table-striped table-hover">
                        <thead>
                          <tr class="firstcol">
                            <th>الاسم</th>

                            <th>الحاله</th>
                            <th>التاريخ</th>
                            <th>الاولويه</th>

                            <th>موكل الي</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>Fiona Green</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                          </tr>
                          <tr>
                            <td>Shou Itou</td>
                            <td>Regional Marketing</td>
                            <td>Tokyo</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- show comments -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 3">
                <div class="container comment-section mt-5">
                  <div class="card p-3">
                    <!-- Add Comment Section -->
                    <div class="container add-comment-section mt-3">
                      <div class="card p-3 d-flex align-items-center">
                        <div class="d-flex align-items-center w-100">
                          <!-- User Avatar -->
                          <img src="../../../assets/images/images.jpg" class="rounded-circle border border-primary me-2"
                            alt="User Avatar">

                          <!-- Comment Input Section -->
                          <div class="flex-grow-1">
                            <input type="text" class="form-control" placeholder="أضف تعليقاً">
                          </div>

                          <!-- Icons and Post Button -->
                          <div class="d-flex align-items-center ms-2">
                            <!-- Voice Icon -->
                            <button class="btn btn-link text-muted p-1"><i class="fa fa-microphone"></i></button>

                            <!-- Attachment Icon -->
                            <button class="btn btn-link text-muted p-1"><i class="fa fa-paperclip"></i></button>

                            <!-- Post Button -->
                            <button class="btn btn-primary ms-2 px-4">نشر</button>
                          </div>
                        </div>
                      </div>
                    </div>


                    <!-- Comments List -->
                    <div class="comments-list mt-4">
                      <div class="comment-item p-3 mb-3">
                        <div class="d-flex align-items-start">
                          <img src="../../../assets/images/images2.jpg" class="rounded-circle" alt="User Avatar">
                          <div class="ms-3 w-100">
                            <div class="d-flex justify-content-between align-items-center">
                              <h6 class="mb-0">خالد ابراهيم</h6>
                              <span class="text-muted small">Aug 19, 2021</span>
                            </div>
                            <p class="mt-2">المندوبين عندكم ممتازين جداً...</p>
                            <div class="comment-actions d-flex">
                              <button class="btn btn-link p-0"><i class="fa fa-heart"></i> 5</button>
                              <button class="btn btn-link p-0 ms-3"><i class="fa fa-comment"></i> 3</button>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Nested Reply Comment -->
                      <div class="comment-item p-3 mb-3 ms-5">
                        <div class="d-flex align-items-start">
                          <img src="../../../assets/images/images2.jpg" class="rounded-circle" alt="User Avatar">
                          <div class="ms-3 w-100">
                            <div class="d-flex justify-content-between align-items-center">
                              <h6 class="mb-0">خالد ابراهيم</h6>
                              <span class="text-muted small">Aug 19, 2021</span>
                            </div>
                            <p class="mt-2">شكراً لك على رأيك الإيجابي...</p>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- View More Comments Link -->
                    <div class="text-center">
                      <a href="#" class="text-primary">باقي التعليقات</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- show Surveys -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 2">
                <div class="row">
                  <div class="col-md-9">
                    <div class="form-group">
                      <label for="field7 text-end">النماذج
                      </label>
                      <input type="text" id="field7" class="form-control" placeholder="مؤشر الأداء الرئيسي 1" />
                    </div>
                  </div>
                  <div class="col-md-3 mb-3 customButton">
                    <div class="col-md-12 text-start">
                      <button class="btn btn-outline-primary me-3">الغاء</button>
                      <button class="btn btn-primary m-2">حفظ</button>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-9">
                    <div class="form-group">
                      <input type="text" id="field7" class="form-control" placeholder="مؤشر الأداء الرئيسي 2" />
                    </div>
                  </div>
                  <div class="col-md-3 mb-4 mt-1">
                    <div class="col-md-12 text-start">
                      <button class="btn btn-outline-primary me-3">الغاء</button>
                      <button class="btn btn-primary m-2">حفظ</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>


            <!-- contract's Money -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 4">


                <div class="container  mt-4">
                  <div class="row">
                    <div class="col-md-2 col-box white-bg">
                      قيمه العقد
                    </div>
                    <div class="col-md-2 col-box gray-bg">
                      100.000.00
                    </div>
                    <div class="col-md-2 col-box white-bg">
                      المستلم من العقد
                    </div>
                    <div class="col-md-2 col-box gray-bg">
                      45.000.00
                    </div>
                    <div class="col-md-2 col-box white-bg">
                      الباقي من العقد
                    </div>
                    <div class="col-md-2 col-box gray-bg">
                      55.000.00
                    </div>
                  </div>
                </div>


                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="card-title text-end">بيانات مصروفات المشروع</h5>

                </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <table id="basic-datatables" class="display table table-striped table-hover">
                        <thead>
                          <tr class="firstcol">
                            <th>مسلسل</th>

                            <th>اسم المصروف</th>
                            <th>تاريخ المصروف</th>
                            <th>قيمه المصروف</th>


                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>Fiona Green</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>Chief Operating Officer (COO)</td>

                          </tr>
                          <tr>
                            <td>Shou Itou</td>
                            <td>Regional Marketing</td>

                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>




              </div>
            </div>


            <!-- contract's section -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 5">

                <div class="row m-3">
                  <div class="card-header d-flex justify-content-between align-items-center col-md-12">
                    <h5 class="card-title text-end"> اقساط العقد</h5>

                    <div class="button-group ">
                      <button type="button" class="btn btn-primary ms-3" data-bs-toggle="modal"
                        data-bs-target="#AddPayment">+ اضف دفعات متعدده</button>

                      <button type="button" class="btn btn-primary me-3" data-bs-toggle="modal"
                        data-bs-target="#AddMultiMoney">+ اضف دفعه</button>
                    </div>

                  </div>
                </div>


                <div class="row m-3">
                  <div class="col-md-6"></div>
                  <div class="d-flex align-items-center flex-row-reverse">
                    <!-- Button with icon -->


                    <!-- Search form -->
                    <form class="d-flex position-relative">
                      <i class="fs-4 bi-search position-absolute search-icon"></i>
                      <input class="form-control text-end search-input" type="search" placeholder="بحث "
                        aria-label="Search" style="width: 200px;" />

                    </form>
                    <button class="btn my-custom-icone me-2">
                      <span class="btn-label">
                        <i class="fa-solid fa-sliders"></i>
                      </span>
                    </button>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <table id="basic-datatables" class="display table table-striped table-hover">
                        <thead>
                          <tr class="firstcol">

                            <th> رقم القسط</th>
                            <th>قيمه القسط</th>
                            <th>تاريخ القسط</th>
                            <th>حاله القسط</th>
                            <th> </th>






                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>Fiona Green</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>

                              <i class="fa-solid fa-link d-inline p-1"></i>
                              <i class="fa-solid fa-pencil d-inline p-1"></i>
                              <i class="fa-solid fa-trash-can d-inline p-1"></i>
                            </td>


                          </tr>
                          <tr>
                            <td>Shou Itou</td>
                            <td>Regional Marketing</td>

                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>

                              <i class="fa-solid fa-link d-inline p-1"></i>
                              <i class="fa-solid fa-pencil d-inline p-1"></i>
                              <i class="fa-solid fa-trash-can d-inline p-1"></i>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>


              </div>
            </div>

            <div class="col-md-6 mx-auto ">
              <button type="submit" class="btn my-button3">
                اضافه
                <i class="fa-solid fa-plus"></i>
              </button>
              <button type="button" class="btn closebutton " (click)="projectForm.reset()" data-bs-dismiss="modal">
                الغاء
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>



<!-- Contact Modal -->

<div class="modal fade" id="AddContact" tabindex="-1" aria-labelledby="AddmessionLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="AddmessionLabel">اضافه جهه اتصال</h5>
      </div>
      <div class="modal-body">
        <form [formGroup]="contactForm" (ngSubmit)="onSubmitContact()">
            <div class="container">
                <!-- Row with two fields -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for=" text-end"> اسم جهه الإتصال</label>
                            <input type="text" id="name" name="name" formControlName="name"
                                class="form-control custom-input" placeholder="اسم المنشأ" />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for=" text-end">اسم جهه الإتصال باللغة المحلية
                            </label>
                            <input type="text" id="localName" name="localName" formControlName="localName"
                                class="form-control custom-input" placeholder="contact Name  " />
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="field4 text-end">رقم جوال 1 لجهه الإتصال</label>
                            <input type="text" id="phoneNumber1" name="phoneNumber1"
                                formControlName="phoneNumber1" class="form-control custom-input"
                                placeholder="رقم الجوال 1" />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for=" text-end">رقم الجوال 2 لجهه الإتصال
                            </label>
                            <input type="text" id="phoneNumber2" name="phoneNumber2"
                                formControlName="phoneNumber2" class="form-control custom-input"
                                placeholder="رقم الجوال 2" />
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for=" text-end"> وظيفة جهه التواصل</label>
                            <input type="text" id="jobTitle" name="jobTitle" formControlName="jobTitle"
                                class="form-control custom-input" placeholder="وظيفة جهه التواصل" />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for=" text-end">ايميل جهه التواصل
                            </label>
                            <input type="text" id="email" name="email" ngModel formControlName="email"
                                class="form-control custom-input" placeholder="ايميل جهه التواصل" />
                        </div>
                    </div>
                </div>



                <!--  -->
                <!-- Location Section -->
                <div class="row align-items-center">
                    <div class="col-md-9">
                        <label for="location" class="form-label">موقع جهه التواصل</label>
                        <div class="input-group">
                            <select class="form-select custom-input" formControlName="locationLinks"
                                name="locationLinks">
                                <option selected disabled>قم بإختيار الموقع</option>
                                <option *ngFor="let item of location" [value]="item.id">{{item.locationName}}
                                </option>

                            </select>
                        </div>
                    </div>
                    <div class="col-md-3 d-flex justify-content-start mt-3 mt-md-0">
                        <button class="btn btn-primary locationButton" type="button">
                            <i class="fas fa-map-marker-alt"></i> أضف موقع
                        </button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="nationality">جنسية جهه التواصل</label>
                            <select id="nationality" name="nationality" formControlName="nationality"
                                class="form-control custom-input">
                                <option value="" disabled selected>قم باختيار جنسية جهه التواصل</option>
                                <option *ngFor="let item of nationalities, index as i " [value]="i">{{item}}
                                </option>


                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="taskField3">العميل</label>
                            <select id="taskField" name="clientId" formControlName="clientId"
                                class="form-control custom-input">
                                <option value="" disabled selected>قم باختيار العميل</option>
                                <option *ngFor="let item of clients" [value]="item.id">{{item.name}}</option>

                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="taskField4">المورد</label>
                            <select id="taskField4" name="supplier" formControlName="supplier"
                                class="form-select form-control custom-input">
                                <option value="" disabled selected>قم باختيار المورد</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                            </select>
                        </div>
                    </div>
                </div>
    

                <div class="row mb-3">
                    <div class="col-md-12">
                        <label for="Textarea1">وصف جهه الإتصال</label>
                        <textarea class="form-control" name="description" formControlName="description"
                            id="Textarea1" rows="3"></textarea>
                    </div>
                </div>

                <!-- Buttons for actions -->
                <div class="row mb-4">
                    <div class="col-md-12 text-start">
                        <button class="btn btn-outline-primary me-3">الغاء</button>
                        <button type="submit" class="btn btn-primary m-2">حفظ</button>
                    </div>
                </div>


                <div class="container mt-3 mb-3">
                    <div class="row">
                        <div class="col-12 d-flex justify-content-between align-items-center flex-row-reverse">
                            <div class="container mt-5">
                                <div class="mb-3 text-center">
                                  <button type="button" class="btn btn-primary" (click)="fileInput.click()">
                                    <i class="fa fa-paperclip"></i> أضف صورة
                                  </button>
                                  <input type="file" #fileInput class="d-none" (change)="onFileSelected($event)" />
                                </div>
                                <ul class="list-group mt-3 mb-3">
                                  <li *ngFor="let attachment of attachments.controls; let i = index"
                                    class="list-group-item d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                      <img src="../../../../../assets/images/mingcute_pdf-fill.png"
                                        style="width: 35px;" />
                                      <span>{{ attachment.value?.name || 'Unnamed File' }}</span>
                                    </div>
                                    <button (click)="removeAttachment(i)" class="btn btn-link text-danger">
                                      <i class="fa fa-trash"></i> حذف
                                    </button>
                                  </li>
                                </ul>
                              </div>
                            <div class="profile-picture ml-3">
                                <img src="../../../../../assets/images/images.jpg" alt="صوره شخصيه"
                                    class="rounded-circle" />
                                <p class="text-center mt-2">صوره شخصيه</p>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- There was code here -->

                <div class="col-md-6 mx-auto ">
                    <button type="submit" class="btn my-button3">
                        اضافه
                        <i class="fa-solid fa-plus"></i>
                    </button>
                    <button type="button" class="btn closebutton " data-bs-dismiss="modal">
                        الغاء
                    </button>

                </div>


            </div>
        </form>
    </div>
      <!-- <div class="modal-footer">
        <button type="button my-button3" class="btn my-button3">
          <i class="fa-solid fa-plus"></i>اضافه
        </button>
        <button type="button" class="btn closebutton" data-bs-dismiss="modal">
          الغاء
        </button>
      </div> -->
    </div>
  </div>
</div>


<!-- Assigment Modal -->

<div class="modal fade" id="Addmession" tabindex="-1" aria-labelledby="AddmessionLabel" aria-hidden="true">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="AddmessionLabel">إضافة مهمه</h5>
      </div>
      <div class="modal-body">
        <!-- Form or content for the second modal -->
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="taskField">اسم المهمه</label>
              <input type="text" id="taskField" class="form-control custom-input" placeholder="أدخل اسم المهمه">
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="taskField2">اسم المهمه باللغه المحليه</label>
              <input type="text" id="taskField2" class="form-control custom-input" placeholder="أدخل اسم المهمه">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="taskField3">الحالة</label>
              <select id="taskField" class="form-control custom-input">
                <option value="" disabled selected>قم باختيار الحالة</option>
                <option value="option1">الخيار الأول</option>
                <option value="option2">الخيار الثاني</option>
                <option value="option3">الخيار الثالث</option>
              </select>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="taskField4">النوع</label>
              <select id="taskField4" class="form-control custom-input">
                <option value="" disabled selected>قم باختيار النوع</option>
                <option value="option1">الخيار الأول</option>
                <option value="option2">الخيار الثاني</option>
                <option value="option3">الخيار الثالث</option>
              </select>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="taskField5">الأولوية</label>
              <select id="taskField5" class="form-control custom-input">
                <option value="" disabled selected>قم باختيار الأولوية</option>
                <option value="option1">الخيار الأول</option>
                <option value="option2">الخيار الثاني</option>
                <option value="option3">الخيار الثالث</option>
              </select>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="taskField6">موكل الى</label>
              <select id="taskField6" class="form-control custom-input">
                <option value="" disabled selected>قم باختيار المستخدم</option>
                <option value="option1">الخيار الأول</option>
                <option value="option2">الخيار الثاني</option>
                <option value="option3">الخيار الثالث</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <label for="Textarea1">وصف المهمه</label>
            <textarea class="form-control custom-input" id="Textarea1" rows="3"></textarea>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <label for="dateInput">تاريخ البدء</label>
            <input type="date" id="dateInput" class="form-control custom-input" placeholder="قم باختيار التاريخ">
          </div>
          <div class="col-md-6">
            <label for="dateInput2">تاريخ الإنتهاء</label>
            <input type="date" id="dateInput2" class="form-control custom-input" placeholder="قم باختيار التاريخ">
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button my-button3" class="btn my-button3">
          <i class="fa-solid fa-plus"></i>اضافه
        </button>
        <button type="button" class="btn closebutton" data-bs-dismiss="modal">
          الغاء
        </button>
      </div>
    </div>
  </div>
</div>

<!-- update -->
<div class="modal overlay" tabindex="-1" role="dialog" [ngClass]="{'show': isModalOpen}" style="display: block;"
  *ngIf="isModalOpen">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-end flex-row-reverse" id="staticBackdropLabel">
          تعديل مشروع
        </h5>
      </div>
      <div class="modal-body">
        <form [formGroup]="projectForm" (ngSubmit)="updateCategory()">
          <div class="container">
            <!-- Row with two fields -->
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field1 text-end"> اسم المشروع</label>
                  <input type="text" id="name" name="name" formControlName="name" class="form-control custom-input"
                    placeholder="اسم المشروع" />
                  <div *ngIf="projectForm.get('name')?.invalid && projectForm.get('name')?.touched" class="text-danger">
                    اسم المشروع مطلوب.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field2 text-end">اسم المشروع باللغه المحليه </label>
                  <input type="text" id="localName" name="localName" formControlName="localName"
                    class="form-control custom-input" placeholder="Project " />
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label class="form-label">العميل</label>
                  <div class="input-group">
                    <select class="form-select form-control custom-input" formControlName="clientId">
                      <option value="" disabled selected>قم باختيار العميل</option>
                      <option *ngFor="let item of clients" [value]="item.id">{{ item.name }}</option>

                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field1 text-end">موكل إلي</label>
                  <div class="input-group">
                    <select class="form-select form-control custom-input" formControlName="clientId">
                      <option value="" disabled selected>قم باختيار المستخدم</option>
                      <option *ngFor="let item of users" [value]="item.id">{{ item.userName }}</option>

                    </select>
                  </div>
                  <div *ngIf="projectForm.get('assignedToId')?.invalid && projectForm.get('assignedToId')?.touched"
                    class="text-danger">
                    اسم الموكل اليه مطلوب.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field2 text-end">فريق</label>
                  <div class="input-group">
                    <select class="form-select form-control custom-input" formControlName="clientId">
                      <option value="" disabled selected>قم باختيار الفريق</option>
                      <option *ngFor="let item of teamss" [value]="item.id">{{ item.name }}</option>

                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label for="field1 text-end">المستخدمين</label>
                  <div class="input-group">
                    <ng-multiselect-dropdown style="width: 100%;" [settings]="dropdownSettings" [data]="users"
                      formArrayName="userIds" (onSelect)="onItemSelect($event)" (onDeSelect)="onItemDeselect($event)"
                      (onSelectAll)="onSelectAll($event)" (onDeSelectAll)="onDeselectAll()">
                    </ng-multiselect-dropdown>
                  </div>
                  <div *ngIf="projectForm.get('userIds')?.invalid && projectForm.get('userIds')?.touched"
                    class="text-danger">
                    المستخدم مطلوب.
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field1 text-end">تاريخ البدء</label>
                  <input type="date" id="startDate" name="startDate" formControlName="startDate"
                    class="form-control custom-input" placeholder="قم باختيار التاريخ" />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="field2 text-end"> تاريخ الانتهاء </label>
                  <input type="date" id="endDate" name="endDate" formControlName="endDate"
                    class="form-control custom-input" placeholder="قم باختيار التاريخ" />
                </div>
              </div>
            </div>

      

            <div class="scroll-buttons-container">
              <button *ngFor="let btn of buttons; let i = index" [id]="'button-' + i" class="scroll-button"
                type="button" (click)="showContent(i)">
                {{ btn }}
              </button>
            </div>

            <!-- Show Details -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 0">
                <div class="container mt-5">
                  <h5 class="mb-3">المرفقات</h5>
                  <button class="btn btn-link text-muted p-1">
                    <i class="fa fa-microphone"></i>
                  </button>

                  <button class="btn btn-link text-muted p-1">
                    <i class="fa fa-paperclip"></i>
                  </button>

                  <div class="custom-file-upload">
                    <i class="fas fa-cloud-upload-alt fa-3x mb-3"></i>
                    <p>حدد ملفًا أو قم بالسحب والإسقاط هنا</p>
                    <small class="text-muted">JPG, PNG or PDF; file size no more than 10MB</small>
                  </div>
                </div>

                <div class="row align-items-center">
                  <div class="col-md-9">
                    <label for="location" class="form-label">الموقع</label>
                    <div class="input-group">
                      <input type="text" id="field3" class="form-control custom-input"
                        placeholder="قم باختيار الموقع" />
                    </div>
                  </div>
                  <div class="col-md-3 d-flex justify-content-start mt-3 mt-md-0">
                    <button class="btn btn-primary locationButton" type="button" (click)="toggleMap()">
                      <i class="fas fa-map-marker-alt"></i> أضف موقع
                    </button>
                  </div>
                </div>

                <!-- Map Viewing -->



                <div *ngIf="isMapView">
                  <div class="row align-items-center">
                    <div class="col-md-9">
                      <label for="location" class="form-label">عرض الخريطه</label>

                    </div>
                    <div class="col-md-3 d-flex justify-content-start mt-3 mt-md-0">
                      <button type="button" class="btn btn-outline-primary m-2" (click)="closeMap()">الغاء</button>
                      <button type="button" class="btn btn-primary m-2">حفظ</button>
                    </div>
                  </div>

                  <!-- Input Fields for Site Information -->
                  <div class="row mb-4">
                    <div class="col-md-3">
                      <label for="siteName" class="form-label">اسم الموقع</label>
                      <input type="text" class="form-control" id="siteName" placeholder="قم بكتابة اسم الموقع">
                    </div>
                    <div class="col-md-3">
                      <label for="line1" class="form-label">خط الطول</label>
                      <input type="text" class="form-control" id="line1" placeholder="قم بكتابة خط الطول">
                    </div>
                    <div class="col-md-3">
                      <label for="line2" class="form-label">خط العرض</label>
                      <input type="text" class="form-control" id="line2" placeholder="قم بكتابة خط العرض">
                    </div>
                    <div class="col-md-3">
                      <label for="line3" class="form-label">العنوان</label>
                      <input type="text" class="form-control" id="line3" placeholder="قم بكتابة خط العرض">
                    </div>
                  </div>

                  <!-- Map Display Section -->
                  <div class="row mb-4">
                    <div class="col-md-12 text-center">
                      <h5 class="mb-4">عرض الخريطة</h5>
                      <div class="map-container" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden;">
                        <iframe
                          src="https://maps.google.com/maps?q=2972%20Westheimer%20Rd,%20Santa%20Ana,%20Elmas%2089846&t=&z=13&ie=UTF8&iwloc=&output=embed"
                          width="100%" height="400" frameborder="0" style="border:0;" allowfullscreen=""
                          aria-hidden="false" tabindex="0">
                        </iframe>
                      </div>
                    </div>
                  </div>

                </div>

                <!-- End MApping View -->

                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field1 text-end">نوع المشروع</label>
                      <input type="text" id="projectTypeId" formControlName="projectTypeId"
                        class="form-control custom-input" placeholder="قم باختبار النوع" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field2 text-end">مركز التكلفه </label>
                      <input type="text" id="costCenterId" formControlName="costCenterId"
                        class="form-control custom-input" placeholder="قم باختيار التكلفه" />
                    </div>
                  </div>
                </div>


                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field1 text-end">اولويه المشروع</label>
                      <input type="text" id="priority" name="priority" formControlName="priority"
                        class="form-control custom-input" placeholder="قم باختبار اولويه المشروع" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field2 text-end"> حجم المشروع</label>
                      <input type="text" id="size" name="size" formControlName="size" class="form-control custom-input"
                        placeholder="قم باختيار حجم المشروع" />
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label for="field1 text-end">وصف المشروع</label>
                      <textarea class="form-control custom-input" formControlName="description" id="description"
                        rows="3"></textarea>
                    </div>
                  </div>
                </div>



                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field1 text-end">العقود</label>
                      <ng-multiselect-dropdown style="width: 100%;" [settings]="ContractsdropdownSettings"
                        [data]="contracts" (onSelect)="onContractSelect($event)"
                        (onDeSelect)="onContractDeselect($event)" (onSelectAll)="onContractSelectAll($event)"
                        (onDeSelectAll)="onContractDeselectAll()">
                      </ng-multiselect-dropdown>

                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="field2 text-end">المعدات </label>
                      <ng-multiselect-dropdown style="width: 100%;" [settings]="EquipdropdownSettings" [data]="equips"
                        (onSelect)="onEquipmentSelect($event)" (onDeSelect)="onEquipmentDeselect($event)"
                        (onSelectAll)="onEquipmentSelectAll($event)" (onDeSelectAll)="onEquipmentDeselectAll()">
                      </ng-multiselect-dropdown>
                    </div>
                  </div>
                </div>

                <div class="row align-items-center mb-4">
                  <div class="col-md-9">
                    <label for="location" class="form-label">جهه الاتصال</label>
                    <div class="input-group">
                      <ng-multiselect-dropdown style="width: 100%;" [settings]="ContactdropdownSettings" [data]="contacts"
                        (onSelect)="onContactSelect($event)" (onDeSelect)="onContactDeselect($event)"
                        (onSelectAll)="onContactSelectAll($event)" (onDeSelectAll)="onContactDeselectAll()">
                      </ng-multiselect-dropdown>
                    </div>
                  </div>
                  <div class="col-md-3 d-flex justify-content-start mt-3 mt-md-0">
                    <button class="btn btn-primary locationButton" type="button" data-bs-toggle="modal"
                      data-bs-target="#AddContact">
                      <i class="fa-solid fa-address-book"></i>أضف جهه الاتصال
                    </button>
                  </div>
                </div>

                <h5>اظهار الانشطه</h5>
                <div class="row">
                  <div class="col-md-6">
                    <div class="container mt-4">
                      <div class="card chat-card">
                        <div class="card-body p-3">
                          <div class="d-flex align-items-center">
                            <h6 class="chat-name mb-0" style="padding-left:120px;">Alice Smith</h6>
                            <span class="chat-time"> 01 Oct 2024</span>
                          </div>
                          <p class="chat-message mt-2">
                            I'm good, thanks for asking! What about you?
                          </p>
                        </div>
                      </div>

                      <div class="card chat-card">
                        <div class="card-body p-3">
                          <div class="d-flex align-items-center">
                            <h6 class="chat-name mb-0" style="padding-left:120px;">Alice Smith</h6>
                            <span class="chat-time"> 01 Oct 2024</span>
                          </div>
                          <p class="chat-message mt-2">
                            I'm good, thanks for asking! What about you?
                          </p>
                        </div>
                      </div>
                    </div>

                  </div>


                </div>


              </div>
            </div>

            <!-- Show assignments  -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 1">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="card-title text-end">المهام</h5>
                  <div class="button-group d-flex justify-content-start">
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#Addmession">+
                      إضافة مهمه</button>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <table id="basic-datatables" class="display table table-striped table-hover">
                        <thead>
                          <tr class="firstcol">
                            <th>الاسم</th>

                            <th>الحاله</th>
                            <th>التاريخ</th>
                            <th>الاولويه</th>

                            <th>موكل الي</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>Fiona Green</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                          </tr>
                          <tr>
                            <td>Shou Itou</td>
                            <td>Regional Marketing</td>
                            <td>Tokyo</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- show comments -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 3">
                <div class="container comment-section mt-5">
                  <div class="card p-3">
                    <!-- Add Comment Section -->
                    <div class="container add-comment-section mt-3">
                      <div class="card p-3 d-flex align-items-center">
                        <div class="d-flex align-items-center w-100">
                          <!-- User Avatar -->
                          <img src="../../../assets/images/images.jpg" class="rounded-circle border border-primary me-2"
                            alt="User Avatar">

                          <!-- Comment Input Section -->
                          <div class="flex-grow-1">
                            <input type="text" class="form-control" placeholder="أضف تعليقاً">
                          </div>

                          <!-- Icons and Post Button -->
                          <div class="d-flex align-items-center ms-2">
                            <!-- Voice Icon -->
                            <button class="btn btn-link text-muted p-1"><i class="fa fa-microphone"></i></button>

                            <!-- Attachment Icon -->
                            <button class="btn btn-link text-muted p-1"><i class="fa fa-paperclip"></i></button>

                            <!-- Post Button -->
                            <button class="btn btn-primary ms-2 px-4">نشر</button>
                          </div>
                        </div>
                      </div>
                    </div>


                    <!-- Comments List -->
                    <div class="comments-list mt-4">
                      <div class="comment-item p-3 mb-3">
                        <div class="d-flex align-items-start">
                          <img src="../../../assets/images/images2.jpg" class="rounded-circle" alt="User Avatar">
                          <div class="ms-3 w-100">
                            <div class="d-flex justify-content-between align-items-center">
                              <h6 class="mb-0">خالد ابراهيم</h6>
                              <span class="text-muted small">Aug 19, 2021</span>
                            </div>
                            <p class="mt-2">المندوبين عندكم ممتازين جداً...</p>
                            <div class="comment-actions d-flex">
                              <button class="btn btn-link p-0"><i class="fa fa-heart"></i> 5</button>
                              <button class="btn btn-link p-0 ms-3"><i class="fa fa-comment"></i> 3</button>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Nested Reply Comment -->
                      <div class="comment-item p-3 mb-3 ms-5">
                        <div class="d-flex align-items-start">
                          <img src="../../../assets/images/images2.jpg" class="rounded-circle" alt="User Avatar">
                          <div class="ms-3 w-100">
                            <div class="d-flex justify-content-between align-items-center">
                              <h6 class="mb-0">خالد ابراهيم</h6>
                              <span class="text-muted small">Aug 19, 2021</span>
                            </div>
                            <p class="mt-2">شكراً لك على رأيك الإيجابي...</p>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- View More Comments Link -->
                    <div class="text-center">
                      <a href="#" class="text-primary">باقي التعليقات</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- show Surveys -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 2">
                <div class="row">
                  <div class="col-md-9">
                    <div class="form-group">
                      <label for="field7 text-end">النماذج
                      </label>
                      <input type="text" id="field7" class="form-control" placeholder="مؤشر الأداء الرئيسي 1" />
                    </div>
                  </div>
                  <div class="col-md-3 mb-3 customButton">
                    <div class="col-md-12 text-start">
                      <button class="btn btn-outline-primary me-3">الغاء</button>
                      <button class="btn btn-primary m-2">حفظ</button>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-9">
                    <div class="form-group">
                      <input type="text" id="field7" class="form-control" placeholder="مؤشر الأداء الرئيسي 2" />
                    </div>
                  </div>
                  <div class="col-md-3 mb-4 mt-1">
                    <div class="col-md-12 text-start">
                      <button class="btn btn-outline-primary me-3">الغاء</button>
                      <button class="btn btn-primary m-2">حفظ</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>


            <!-- contract's Money -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 4">


                <div class="container  mt-4">
                  <div class="row">
                    <div class="col-md-2 col-box white-bg">
                      قيمه العقد
                    </div>
                    <div class="col-md-2 col-box gray-bg">
                      100.000.00
                    </div>
                    <div class="col-md-2 col-box white-bg">
                      المستلم من العقد
                    </div>
                    <div class="col-md-2 col-box gray-bg">
                      45.000.00
                    </div>
                    <div class="col-md-2 col-box white-bg">
                      الباقي من العقد
                    </div>
                    <div class="col-md-2 col-box gray-bg">
                      55.000.00
                    </div>
                  </div>
                </div>


                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="card-title text-end">بيانات مصروفات المشروع</h5>

                </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <table id="basic-datatables" class="display table table-striped table-hover">
                        <thead>
                          <tr class="firstcol">
                            <th>مسلسل</th>

                            <th>اسم المصروف</th>
                            <th>تاريخ المصروف</th>
                            <th>قيمه المصروف</th>


                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>Fiona Green</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>Chief Operating Officer (COO)</td>

                          </tr>
                          <tr>
                            <td>Shou Itou</td>
                            <td>Regional Marketing</td>

                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>




              </div>
            </div>


            <!-- contract's section -->

            <div *ngIf="selectedButton !== null">
              <div *ngIf="selectedButton === 5">

                <div class="row m-3">
                  <div class="card-header d-flex justify-content-between align-items-center col-md-12">
                    <h5 class="card-title text-end"> اقساط العقد</h5>

                    <div class="button-group ">
                      <button type="button" class="btn btn-primary ms-3" data-bs-toggle="modal"
                        data-bs-target="#AddPayment">+ اضف دفعات متعدده</button>

                      <button type="button" class="btn btn-primary me-3" data-bs-toggle="modal"
                        data-bs-target="#AddMultiMoney">+ اضف دفعه</button>
                    </div>

                  </div>
                </div>


                <div class="row m-3">
                  <div class="col-md-6"></div>
                  <div class="d-flex align-items-center flex-row-reverse">
                    <!-- Button with icon -->


                    <!-- Search form -->
                    <form class="d-flex position-relative">
                      <i class="fs-4 bi-search position-absolute search-icon"></i>
                      <input class="form-control text-end search-input" type="search" placeholder="بحث "
                        aria-label="Search" style="width: 200px;" />

                    </form>
                    <button class="btn my-custom-icone me-2">
                      <span class="btn-label">
                        <i class="fa-solid fa-sliders"></i>
                      </span>
                    </button>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <table id="basic-datatables" class="display table table-striped table-hover">
                        <thead>
                          <tr class="firstcol">

                            <th> رقم القسط</th>
                            <th>قيمه القسط</th>
                            <th>تاريخ القسط</th>
                            <th>حاله القسط</th>
                            <th> </th>






                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>Fiona Green</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>

                              <i class="fa-solid fa-link d-inline p-1"></i>
                              <i class="fa-solid fa-pencil d-inline p-1"></i>
                              <i class="fa-solid fa-trash-can d-inline p-1"></i>
                            </td>


                          </tr>
                          <tr>
                            <td>Shou Itou</td>
                            <td>Regional Marketing</td>

                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>

                              <i class="fa-solid fa-link d-inline p-1"></i>
                              <i class="fa-solid fa-pencil d-inline p-1"></i>
                              <i class="fa-solid fa-trash-can d-inline p-1"></i>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>


              </div>
            </div>

            <div class="col-md-6 mx-auto ">
              <button type="submit" class="btn my-button3">
                اضافه
                <i class="fa-solid fa-plus"></i>
              </button>
              <button type="button" (click)="closeModal()" class="btn closebutton " (click)="projectForm.reset()"
                data-bs-dismiss="modal">
                الغاء
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Confirmation Modal -->
<div *ngIf="showConfirmationModal" class="confirmation-modal">
  <div class="modal-content">
    <p>هل أنت متأكد؟</p>
    <div class="col-md-12 mx-auto">
      <button (click)="deleteItemType()" class="btn btn-danger">نعم</button>

      <button (click)="closeConfirmationModal()" class="btn btn-secondary">إلغاء</button>

    </div>
  </div>
</div>